<!doctype html>
<html lang="th">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß O-NET ‡∏°.6</title>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Prompt', sans-serif;
    }
    
    * {
      font-family: 'Prompt', sans-serif;
    }
    
    .card-hover {
      transition: all 0.2s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }
    
    .status-badge {
      display: inline-flex;
      align-items: center;
      padding: 4px 12px;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
    }
    
    .status-open {
      background-color: #DBEAFE;
      color: #1E40AF;
    }
    
    .status-done {
      background-color: #D1FAE5;
      color: #065F46;
    }
    
    .status-cancelled {
      background-color: #F3F4F6;
      color: #6B7280;
    }
    
    .status-pass {
      background-color: #D1FAE5;
      color: #065F46;
    }
    
    .status-not-pass {
      background-color: #FEE2E2;
      color: #991B1B;
    }
    
    .loading-spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid #3498db;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 24px;
      border-radius: 8px;
      color: white;
      font-weight: 500;
      z-index: 1000;
      transform: translateX(400px);
      transition: transform 0.3s ease;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification.success {
      background-color: #10B981;
    }
    
    .notification.error {
      background-color: #EF4444;
    }
    
    .notification.info {
      background-color: #3B82F6;
    }
    
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal.show {
      opacity: 1;
      visibility: visible;
    }
    
    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 24px;
      max-width: 90vw;
      max-height: 90vh;
      overflow-y: auto;
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }
    
    .modal.show .modal-content {
      transform: scale(1);
    }
    
    .user-role-badge {
      display: inline-flex;
      align-items: center;
      padding: 4px 12px;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
    }
    
    .role-admin {
      background-color: #FEE2E2;
      color: #991B1B;
    }
    
    .role-viewer {
      background-color: #E0F2FE;
      color: #0C4A6E;
    }
    
    .admin-only {
      display: none;
    }
    
    .admin-mode .admin-only {
      display: block;
    }
    
    .admin-mode .admin-inline {
      display: inline-flex;
    }
    
    .admin-inline {
      display: none;
    }
    
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 1px;
      background-color: #e5e7eb;
      border-radius: 8px;
      overflow: hidden;
    }
    
    .calendar-header {
      background-color: #f3f4f6;
      padding: 8px 4px;
      text-align: center;
      font-size: 0.75rem;
      font-weight: 600;
      color: #374151;
    }
    
    .calendar-day {
      background-color: white;
      padding: 8px 4px;
      min-height: 40px;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    
    .calendar-day:hover {
      background-color: #f9fafb;
    }
    
    .calendar-day.other-month {
      color: #9ca3af;
      background-color: #f9fafb;
    }
    
    .calendar-day.today {
      background-color: #dcfce7;
      color: #166534;
      font-weight: 600;
    }
    
    .calendar-day.has-sessions {
      background-color: #dbeafe;
      color: #1e40af;
      font-weight: 500;
    }
    
    .calendar-day.has-sessions:hover {
      background-color: #bfdbfe;
    }
    
    .calendar-day-number {
      font-size: 0.875rem;
      margin-bottom: 2px;
    }
    
    .calendar-sessions-count {
      font-size: 0.625rem;
      background-color: #3b82f6;
      color: white;
      border-radius: 10px;
      padding: 1px 6px;
      min-width: 16px;
      text-align: center;
    }
    
    .session-detail-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .session-detail-modal.show {
      opacity: 1;
      visibility: visible;
    }

    @media print {
      .no-print {
        display: none !important;
      }
      
      body {
        background: white;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="bg-gray-50">
  <div id="app" class="min-h-full"><!-- Header -->
   <header class="bg-white shadow-sm border-b border-gray-200 no-print">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
     <div class="flex items-center justify-between">
      <div>
       <h1 id="header-title" class="text-2xl font-bold text-gray-900">‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß O-NET ‡∏°.6</h1>
       <p id="header-subtitle" class="text-sm text-gray-600 mt-1">‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó‡∏û‡∏¥‡∏ó‡∏¢‡∏≤‡∏Ñ‡∏° | ‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ 2568</p>
      </div>
      <div class="flex items-center gap-3"><span id="period-badge" class="px-3 py-1 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium">28 ‡∏ï.‡∏Ñ. 2568 ‚Äì 13 ‡∏°‡∏µ.‡∏Ñ. 2569</span>
       <div class="flex items-center gap-2"><span id="user-role-badge" class="user-role-badge role-viewer">üë§ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span> <button id="login-logout-btn" onclick="showLoginModal()" class="px-3 py-1 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors"> üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö </button>
       </div>
      </div>
     </div>
    </div>
   </header><!-- Navigation -->
   <nav class="bg-white border-b border-gray-200 no-print">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
     <div class="flex space-x-8 overflow-x-auto"><button onclick="showPage('dashboard')" class="nav-btn px-3 py-4 text-sm font-medium border-b-2 border-blue-600 text-blue-600 whitespace-nowrap"> üìä Dashboard </button> <button onclick="showPage('schedule')" class="nav-btn px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap"> üìÖ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß </button> <button onclick="showPage('sessions')" class="nav-btn px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap admin-only"> üìù ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏ö </button> <button onclick="showPage('attendance')" class="nav-btn px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap admin-only"> ‚úÖ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠ </button> <button onclick="showPage('reports')" class="nav-btn px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap"> üìà ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô </button> <button onclick="showPage('masters')" class="nav-btn px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap admin-only"> üóÇÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô </button> <button onclick="showPage('settings')" class="nav-btn px-3 py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap admin-only"> ‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ </button>
     </div>
    </div>
   </nav><!-- Main Content -->
   <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!-- Dashboard Page -->
    <div id="page-dashboard" class="page-content">
     <div class="mb-6">
      <h2 class="text-2xl font-bold text-gray-900">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö</h2>
      <p class="text-gray-600 mt-1">‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏ß O-NET ‡∏°.6 ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå</p>
     </div><!-- Storage Status -->
     <div class="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg">
      <div class="flex items-center gap-3">
       <div class="w-3 h-3 bg-green-500 rounded-full"></div>
       <div>
        <p class="text-sm font-medium text-green-900">‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå</p>
        <p class="text-xs text-green-700 mt-1">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="total-records">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ | ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="current-role-text">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span></p>
       </div>
      </div>
     </div><!-- KPI Cards -->
     <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
       <div class="flex items-center justify-between">
        <div>
         <p class="text-sm font-medium text-gray-600">‡∏Ñ‡∏≤‡∏ö‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß</p>
         <p class="text-3xl font-bold text-gray-900 mt-2" id="stat-sessions">0</p>
        </div>
        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"><span class="text-2xl">üìã</span>
        </div>
       </div>
      </div>
      <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
       <div class="flex items-center justify-between">
        <div>
         <p class="text-sm font-medium text-gray-600">‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
         <p class="text-3xl font-bold text-gray-900 mt-2" id="stat-attendance">0</p>
        </div>
        <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"><span class="text-2xl">‚úÖ</span>
        </div>
       </div>
      </div>
      <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
       <div class="flex items-center justify-between">
        <div>
         <p class="text-sm font-medium text-gray-600">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</p>
         <p class="text-3xl font-bold text-green-600 mt-2" id="stat-rate">0%</p>
        </div>
        <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"><span class="text-2xl">üìä</span>
        </div>
       </div>
      </div>
      <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
       <div class="flex items-center justify-between">
        <div>
         <p class="text-sm font-medium text-gray-600">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á &lt;80%</p>
         <p class="text-3xl font-bold text-red-600 mt-2" id="stat-risk">0</p>
        </div>
        <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center"><span class="text-2xl">‚ö†Ô∏è</span>
        </div>
       </div>
      </div>
     </div><!-- Calendar Section -->
     <div class="mb-8">
      <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
       <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-bold text-gray-900">üìÖ ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß</h3>
        <div class="flex items-center gap-3"><button onclick="previousMonth()" class="px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors font-medium"> ‚Äπ ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô </button> <span id="calendar-month-year" class="text-lg font-semibold text-gray-800 min-w-40 text-center">‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568</span> <button onclick="nextMonth()" class="px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors font-medium"> ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‚Ä∫ </button>
        </div>
       </div><!-- Calendar Legend -->
       <div class="flex items-center justify-center gap-6 mb-4 text-sm">
        <div class="flex items-center gap-2">
         <div class="w-4 h-4 bg-green-200 rounded"></div><span class="text-gray-600">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</span>
        </div>
        <div class="flex items-center gap-2">
         <div class="w-4 h-4 bg-blue-200 rounded"></div><span class="text-gray-600">‡∏°‡∏µ‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß</span>
        </div>
        <div class="flex items-center gap-2">
         <div class="w-4 h-4 bg-gray-100 border rounded"></div><span class="text-gray-600">‡∏ß‡∏±‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</span>
        </div>
       </div>
       <div id="calendar-container" class="mb-6"><!-- Calendar will be rendered here -->
       </div><!-- Today's Sessions -->
       <div class="border-t border-gray-200 pt-6">
        <h4 class="text-lg font-semibold text-gray-900 mb-4">üìã ‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h4>
        <div id="today-sessions" class="space-y-3">
         <div class="text-center text-gray-500 py-8"><span class="text-4xl mb-2 block">üìÖ</span>
          <p class="text-sm">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
          <p class="text-xs text-gray-400 mt-1">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ô‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß</p>
         </div>
        </div>
       </div>
      </div>
     </div>
     <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!-- Quick Actions -->
      <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
       <h3 class="text-lg font-semibold text-gray-900 mb-4">‚ö° ‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πà‡∏ß‡∏ô</h3>
       <div class="space-y-3"><button onclick="showPage('sessions')" class="admin-only w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center justify-center gap-2"> <span>üìù</span> <span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</span> </button> <button onclick="showPage('attendance')" class="admin-only w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium flex items-center justify-center gap-2"> <span>‚úÖ</span> <span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</span> </button> <button onclick="showPage('reports')" class="w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium flex items-center justify-center gap-2"> <span>üìà</span> <span>‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ</span> </button> <button onclick="exportData()" class="w-full px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium flex items-center justify-center gap-2"> <span>üì•</span> <span>‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span> </button> <button onclick="showPage('schedule')" class="w-full px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium flex items-center justify-center gap-2"> <span>üìÖ</span> <span>‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏°</span> </button>
        <div class="admin-only mt-6 p-4 bg-red-50 border border-red-200 rounded-lg">
         <div class="flex items-start gap-2"><span class="text-red-600">üóëÔ∏è</span>
          <div>
           <p class="text-sm font-medium text-red-900">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p><button onclick="confirmResetData()" class="text-xs text-red-700 mt-1 underline hover:no-underline">‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
          </div>
         </div>
        </div>
       </div>
      </div><!-- Quick Stats -->
      <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
       <h3 class="text-lg font-semibold text-gray-900 mb-4">üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏î‡πà‡∏ß‡∏ô</h3>
       <div class="space-y-4">
        <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
         <div class="flex items-center gap-3"><span class="text-2xl">üìö</span>
          <div>
           <p class="text-sm font-medium text-gray-900">‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
           <p class="text-xs text-gray-600">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≤‡∏ö‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</p>
          </div>
         </div><span class="text-xl font-bold text-blue-600" id="quick-stat-sessions">0</span>
        </div>
        <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
         <div class="flex items-center gap-3"><span class="text-2xl">‚úÖ</span>
          <div>
           <p class="text-sm font-medium text-gray-900">‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</p>
           <p class="text-xs text-gray-600">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</p>
          </div>
         </div><span class="text-xl font-bold text-green-600" id="quick-stat-attendance">0</span>
        </div>
        <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg">
         <div class="flex items-center gap-3"><span class="text-2xl">üìà</span>
          <div>
           <p class="text-sm font-medium text-gray-900">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</p>
           <p class="text-xs text-gray-600">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</p>
          </div>
         </div><span class="text-xl font-bold text-yellow-600" id="quick-stat-rate">0%</span>
        </div>
       </div>
       <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
        <div class="flex items-start gap-2"><span class="text-blue-600">üí°</span>
         <div>
          <p class="text-sm font-medium text-blue-900">‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö</p>
          <p class="text-xs text-blue-700 mt-1">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ô‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏õ‡πá‡∏ô "‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
         </div>
        </div>
       </div>
      </div>
     </div>
    </div><!-- Sessions Management Page -->
    <div id="page-sessions" class="page-content hidden">
     <div class="mb-6">
      <div class="flex items-center justify-between">
       <div>
        <h2 class="text-2xl font-bold text-gray-900">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß</h2>
        <p class="text-gray-600 mt-1">‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏•‡∏ö ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
       </div>
       <div class="flex gap-3"><button onclick="openSessionModal()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"> ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≤‡∏ö‡πÉ‡∏´‡∏°‡πà </button> <button onclick="bulkDeleteSessions()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium"> üóëÔ∏è ‡∏•‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ </button> <button onclick="duplicateSession()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium"> üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏≤‡∏ö </button>
       </div>
      </div>
     </div><!-- Sessions List -->
     <div class="bg-white rounded-lg shadow-sm border border-gray-200">
      <div class="px-6 py-4 border-b border-gray-200">
       <div class="flex items-center justify-between">
        <h3 class="text-lg font-semibold text-gray-900">üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
        <div class="flex items-center gap-4"><label class="flex items-center gap-2 text-sm text-gray-600"> <input type="checkbox" id="select-all-sessions" onchange="toggleSelectAllSessions()" class="rounded border-gray-300"> <span>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span> </label>
         <div id="selected-sessions-count" class="text-sm text-gray-500 hidden">
          ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: <span id="sessions-count">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
         </div>
        </div>
       </div>
      </div>
      <div id="sessions-list" class="p-6">
       <div class="text-center text-gray-500 py-8"><span class="text-4xl mb-4 block">üìã</span>
        <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≤‡∏ö‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</p>
        <p class="text-xs text-gray-400 mt-1">‡∏Ñ‡∏•‡∏¥‡∏Å "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≤‡∏ö‡πÉ‡∏´‡∏°‡πà" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>
       </div>
      </div>
     </div>
    </div><!-- Attendance Management Page -->
    <div id="page-attendance" class="page-content hidden">
     <div class="mb-6">
      <div class="flex items-center justify-between">
       <div>
        <h2 class="text-2xl font-bold text-gray-900">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</h2>
        <p class="text-gray-600 mt-1">‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏•‡∏ö ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
       </div>
       <div class="flex gap-3"><button onclick="openAttendanceModal()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium"> ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠ </button> <button onclick="bulkDeleteAttendance()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium"> üóëÔ∏è ‡∏•‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ </button> <button onclick="bulkAttendanceEntry()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium"> üìù ‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏π‡πà </button>
       </div>
      </div>
     </div><!-- Attendance List -->
     <div class="bg-white rounded-lg shadow-sm border border-gray-200">
      <div class="px-6 py-4 border-b border-gray-200">
       <div class="flex items-center justify-between">
        <h3 class="text-lg font-semibold text-gray-900">‚úÖ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</h3>
        <div class="flex items-center gap-4"><label class="flex items-center gap-2 text-sm text-gray-600"> <input type="checkbox" id="select-all-attendance" onchange="toggleSelectAllAttendance()" class="rounded border-gray-300"> <span>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span> </label>
         <div id="selected-attendance-count" class="text-sm text-gray-500 hidden">
          ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: <span id="attendance-count">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
         </div>
        </div>
       </div>
      </div>
      <div id="attendance-list" class="p-6">
       <div class="text-center text-gray-500 py-8"><span class="text-4xl mb-4 block">‚úÖ</span>
        <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</p>
        <p class="text-xs text-gray-400 mt-1">‡∏Ñ‡∏•‡∏¥‡∏Å "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>
       </div>
      </div>
     </div>
    </div><!-- Reports Page -->
    <div id="page-reports" class="page-content hidden">
     <div class="mb-6">
      <h2 class="text-2xl font-bold text-gray-900">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ</h2>
      <p class="text-gray-600 mt-1">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏ï‡∏¥‡∏ß O-NET</p>
     </div><!-- Summary Cards -->
     <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
      <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
       <div class="text-sm font-medium text-gray-600 mb-2">
        ‡∏Ñ‡∏≤‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
       </div>
       <div class="text-3xl font-bold text-gray-900" id="report-total-sessions">
        0
       </div>
      </div>
      <div class="bg-green-50 rounded-lg shadow-sm p-6 border border-green-200">
       <div class="text-sm font-medium text-green-700 mb-2">
        ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
       </div>
       <div class="text-3xl font-bold text-green-900" id="report-total-attendance">
        0
       </div>
      </div>
      <div class="bg-blue-50 rounded-lg shadow-sm p-6 border border-blue-200">
       <div class="text-sm font-medium text-blue-700 mb-2">
        ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
       </div>
       <div class="text-3xl font-bold text-blue-900" id="report-avg-rate">
        0%
       </div>
      </div>
     </div><!-- Reports Table -->
     <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
      <div class="px-6 py-4 border-b border-gray-200">
       <h3 class="text-lg font-semibold text-gray-900">üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</h3>
      </div>
      <div class="overflow-x-auto">
       <div id="reports-table" class="p-6">
        <div class="text-center text-gray-500 py-8"><span class="text-4xl mb-4 block">üìä</span>
         <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</p>
         <p class="text-xs text-gray-400 mt-1">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</p>
        </div>
       </div>
      </div>
     </div>
    </div><!-- Schedule Page -->
    <div id="page-schedule" class="page-content hidden">
     <div class="mb-6">
      <h2 class="text-2xl font-bold text-gray-900">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß O-NET</h2>
      <p class="text-gray-600 mt-1">‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ</p>
     </div>
     <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
      <div id="schedule-content">
       <div class="text-center text-gray-500 py-8"><span class="text-4xl mb-4 block">üìÖ</span>
        <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß</p>
        <p class="text-xs text-gray-400 mt-1">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß</p>
       </div>
      </div>
     </div>
    </div><!-- Masters Page -->
    <div id="page-masters" class="page-content hidden">
     <div class="mb-6">
      <h2 class="text-2xl font-bold text-gray-900">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h2>
      <p class="text-gray-600 mt-1">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏π ‡∏ß‡∏¥‡∏ä‡∏≤ ‡πÅ‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
     </div>
     <div class="grid grid-cols-1 md:grid-cols-3 gap-6"><!-- Teachers -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
       <h3 class="text-lg font-semibold text-gray-900 mb-4">üë®‚Äçüè´ ‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô</h3>
       <div id="teachers-list" class="space-y-2">
        <div class="text-center text-gray-500 py-4">
         <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏π</p>
        </div>
       </div>
      </div><!-- Subjects -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
       <h3 class="text-lg font-semibold text-gray-900 mb-4">üìö ‡∏ß‡∏¥‡∏ä‡∏≤</h3>
       <div id="subjects-list" class="space-y-2">
        <div class="text-center text-gray-500 py-4">
         <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏ä‡∏≤</p>
        </div>
       </div>
      </div><!-- Classes -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
       <h3 class="text-lg font-semibold text-gray-900 mb-4">üè´ ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
       <div id="classes-list" class="space-y-2">
        <div class="text-center text-gray-500 py-4">
         <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á</p>
        </div>
       </div>
      </div>
     </div>
    </div><!-- Settings Page -->
    <div id="page-settings" class="page-content hidden">
     <div class="mb-6">
      <h2 class="text-2xl font-bold text-gray-900">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h2>
      <p class="text-gray-600 mt-1">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö</p>
     </div>
     <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!-- System Info -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
       <h3 class="text-lg font-semibold text-gray-900 mb-4">‚öôÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h3>
       <div class="space-y-4">
        <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
         <div class="flex items-center gap-3">
          <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
          <div>
           <p class="text-sm font-medium text-blue-900">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: Local Storage</p>
           <p class="text-xs text-blue-700 mt-1">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
          </div>
         </div>
        </div>
        <div class="p-4 bg-green-50 border border-green-200 rounded-lg">
         <div class="flex items-center gap-3">
          <div class="w-3 h-3 bg-green-500 rounded-full"></div>
          <div>
           <p class="text-sm font-medium text-green-900">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
           <p class="text-xs text-green-700 mt-1">‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</p>
          </div>
         </div>
        </div>
        <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
         <div class="flex items-center gap-3">
          <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
          <div>
           <p class="text-sm font-medium text-yellow-900">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="settings-total-records">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
           <p class="text-xs text-yellow-700 mt-1">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</p>
          </div>
         </div>
        </div>
       </div>
      </div><!-- Data Management -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
       <h3 class="text-lg font-semibold text-gray-900 mb-4">üóÇÔ∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
       <div class="space-y-4"><button onclick="exportData()" class="w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center justify-center gap-2"> <span>üì•</span> <span>‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (CSV)</span> </button> <button onclick="downloadSampleCSV()" class="w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium flex items-center justify-center gap-2"> <span>üìã</span> <span>‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö CSV</span> </button> <button onclick="importData()" class="w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium flex items-center justify-center gap-2"> <span>üì§</span> <span>‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (CSV)</span> </button> <button onclick="loadSampleSchedule()" class="w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium flex items-center justify-center gap-2"> <span>üìÖ</span> <span>‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</span> </button>
        <div class="border-t border-gray-200 pt-4"><button onclick="confirmResetData()" class="w-full px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium flex items-center justify-center gap-2"> <span>üóëÔ∏è</span> <span>‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span> </button>
         <p class="text-xs text-red-600 mt-2 text-center">‚ö†Ô∏è ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ</p>
        </div>
       </div>
      </div>
     </div><!-- Schedule Import Section -->
     <div class="mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-6 admin-only">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">üìã ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß</h3>
      <div class="space-y-4">
       <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
        <div class="flex items-start gap-3"><span class="text-blue-600">üí°</span>
         <div>
          <p class="text-sm font-medium text-blue-900">‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
          <ul class="text-xs text-blue-700 mt-1 space-y-1">
           <li>‚Ä¢ ‡∏Ñ‡∏•‡∏¥‡∏Å "‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏°‡∏≤</li>
           <li>‚Ä¢ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ ‡πÅ‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</li>
           <li>‚Ä¢ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏ö"</li>
           <li>‚Ä¢ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</li>
          </ul>
         </div>
        </div>
       </div>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
        <div class="p-3 bg-gray-50 rounded-lg">
         <p class="font-medium text-gray-900">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤:</p>
         <ul class="text-gray-600 mt-1 space-y-1">
          <li>‚Ä¢ 8 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß</li>
          <li>‚Ä¢ 11 ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏°.6/1 - ‡∏°.6/11)</li>
          <li>‚Ä¢ ‡∏ß‡∏¥‡∏ä‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô</li>
          <li>‚Ä¢ ‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î</li>
         </ul>
        </div>
        <div class="p-3 bg-gray-50 rounded-lg">
         <p class="font-medium text-gray-900">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:</p>
         <ul class="text-gray-600 mt-1 space-y-1">
          <li>‚Ä¢ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</li>
          <li>‚Ä¢ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</li>
          <li>‚Ä¢ ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</li>
          <li>‚Ä¢ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>
         </ul>
        </div>
       </div>
      </div>
     </div>
    </div>
   </main><!-- Session Modal -->
   <div id="session-modal" class="modal">
    <div class="modal-content w-full max-w-2xl">
     <div class="flex items-center justify-between mb-6">
      <h3 id="session-modal-title" class="text-xl font-bold text-gray-900">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≤‡∏ö‡πÉ‡∏´‡∏°‡πà</h3><button onclick="closeSessionModal()" class="text-gray-400 hover:text-gray-600"> <span class="text-2xl">√ó</span> </button>
     </div>
     <form id="session-form" class="space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏ß‡∏¥‡∏ä‡∏≤ *</label> <select id="session-subject" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤</option> <option value="‡πÑ‡∏ó‡∏¢">‡πÑ‡∏ó‡∏¢</option> <option value="‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©">‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©</option> <option value="‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1">‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1</option> <option value="‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå">‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå</option> <option value="‡πÄ‡∏Ñ‡∏°‡∏µ">‡πÄ‡∏Ñ‡∏°‡∏µ</option> <option value="‡∏ä‡∏µ‡∏ß‡∏∞">‡∏ä‡∏µ‡∏ß‡∏∞</option> <option value="‡∏™‡∏±‡∏á‡∏Ñ‡∏°">‡∏™‡∏±‡∏á‡∏Ñ‡∏°</option> <option value="‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1">‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1</option> </select>
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô *</label> <input type="text" id="session-teacher" required placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏´‡πâ‡∏≠‡∏á ‡∏°.6 *</label> <select id="session-class" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á</option> <option value="‡∏°.6/1">‡∏°.6/1</option> <option value="‡∏°.6/2">‡∏°.6/2</option> <option value="‡∏°.6/3">‡∏°.6/3</option> <option value="‡∏°.6/4">‡∏°.6/4</option> <option value="‡∏°.6/5">‡∏°.6/5</option> <option value="‡∏°.6/10">‡∏°.6/10</option> </select>
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô *</label> <input type="text" id="session-classroom" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 235, 242" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà *</label> <input type="date" id="session-date" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡πÄ‡∏ß‡∏•‡∏≤ *</label> <select id="session-time" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤</option> <option value="08:00-09:30">08:00-09:30</option> <option value="09:45-11:15">09:45-11:15</option> <option value="13:00-14:30">13:00-14:30</option> <option value="14:45-16:15">14:45-16:15</option> <option value="15:30-17:00">15:30-17:00</option> </select>
       </div>
      </div>
      <div class="flex gap-3 pt-4"><button type="submit" id="save-session-btn" class="flex-1 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"> üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å </button> <button type="button" onclick="closeSessionModal()" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium"> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å </button>
      </div>
     </form>
    </div>
   </div><!-- Attendance Modal -->
   <div id="attendance-modal" class="modal">
    <div class="modal-content w-full max-w-2xl">
     <div class="flex items-center justify-between mb-6">
      <h3 id="attendance-modal-title" class="text-xl font-bold text-gray-900">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</h3><button onclick="closeAttendanceModal()" class="text-gray-400 hover:text-gray-600"> <span class="text-2xl">√ó</span> </button>
     </div>
     <form id="attendance-form" class="space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô *</label> <input type="text" id="attendance-student-id" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 68001" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label> <input type="text" id="attendance-student-name" required placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏´‡πâ‡∏≠‡∏á ‡∏°.6 *</label> <select id="attendance-class" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á</option> <option value="‡∏°.6/1">‡∏°.6/1</option> <option value="‡∏°.6/2">‡∏°.6/2</option> <option value="‡∏°.6/3">‡∏°.6/3</option> <option value="‡∏°.6/4">‡∏°.6/4</option> <option value="‡∏°.6/5">‡∏°.6/5</option> <option value="‡∏°.6/10">‡∏°.6/10</option> </select>
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ *</label> <select id="attendance-status" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option> <option value="P">P - ‡∏°‡∏≤</option> <option value="L">L - ‡∏™‡∏≤‡∏¢</option> <option value="A">A - ‡∏Ç‡∏≤‡∏î</option> <option value="E">E - ‡∏•‡∏≤</option> </select>
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏ß‡∏¥‡∏ä‡∏≤ *</label> <select id="attendance-subject" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤</option> <option value="‡πÑ‡∏ó‡∏¢">‡πÑ‡∏ó‡∏¢</option> <option value="‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©">‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©</option> <option value="‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1">‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1</option> <option value="‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå">‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå</option> <option value="‡πÄ‡∏Ñ‡∏°‡∏µ">‡πÄ‡∏Ñ‡∏°‡∏µ</option> <option value="‡∏ä‡∏µ‡∏ß‡∏∞">‡∏ä‡∏µ‡∏ß‡∏∞</option> <option value="‡∏™‡∏±‡∏á‡∏Ñ‡∏°">‡∏™‡∏±‡∏á‡∏Ñ‡∏°</option> <option value="‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1">‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1</option> </select>
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô *</label> <input type="text" id="attendance-teacher" required placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà *</label> <input type="date" id="attendance-date" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">‡πÄ‡∏ß‡∏•‡∏≤ *</label> <select id="attendance-time" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤</option> <option value="08:00-09:30">08:00-09:30</option> <option value="09:45-11:15">09:45-11:15</option> <option value="13:00-14:30">13:00-14:30</option> <option value="14:45-16:15">14:45-16:15</option> <option value="15:30-17:00">15:30-17:00</option> </select>
       </div>
      </div>
      <div class="flex gap-3 pt-4"><button type="submit" id="save-attendance-btn" class="flex-1 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium"> ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å </button> <button type="button" onclick="closeAttendanceModal()" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium"> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å </button>
      </div>
     </form>
    </div>
   </div><!-- Confirmation Modal -->
   <div id="confirm-modal" class="modal">
    <div class="modal-content w-full max-w-md">
     <div class="text-center">
      <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4"><span class="text-red-600 text-xl">‚ö†Ô∏è</span>
      </div>
      <h3 class="text-lg font-medium text-gray-900 mb-2" id="confirm-title">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö</h3>
      <p class="text-sm text-gray-500 mb-6" id="confirm-message">‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ?</p>
      <div class="flex gap-3"><button onclick="closeConfirmModal()" class="flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å </button> <button id="confirm-action-btn" class="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"> ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô </button>
      </div>
     </div>
    </div>
   </div><!-- Login Modal -->
   <div id="login-modal" class="modal">
    <div class="modal-content w-full max-w-md">
     <div class="flex items-center justify-between mb-6">
      <h3 class="text-xl font-bold text-gray-900">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h3><button onclick="closeLoginModal()" class="text-gray-400 hover:text-gray-600"> <span class="text-2xl">√ó</span> </button>
     </div>
     <form id="login-form" class="space-y-4">
      <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label> <input type="text" id="login-username" required placeholder="admin" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
      </div>
      <div><label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label> <input type="password" id="login-password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
      </div>
      <div id="login-error" class="hidden p-3 bg-red-50 border border-red-200 rounded-lg">
       <p class="text-sm text-red-700">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</p>
      </div>
      <div class="text-xs text-gray-500 bg-blue-50 p-3 rounded-lg">
       <p><strong>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö:</strong></p>
       <p>‚Ä¢ ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: <code class="bg-white px-1 rounded">admin</code></p>
       <p>‚Ä¢ ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô: <code class="bg-white px-1 rounded">admin123</code></p>
      </div>
      <div class="flex gap-3 pt-4"><button type="submit" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"> üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö </button> <button type="button" onclick="closeLoginModal()" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å </button>
      </div>
     </form>
    </div>
   </div><!-- Import Modal -->
   <div id="import-modal" class="modal">
    <div class="modal-content w-full max-w-md">
     <div class="flex items-center justify-between mb-6">
      <h3 class="text-xl font-bold text-gray-900">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3><button onclick="closeImportModal()" class="text-gray-400 hover:text-gray-600"> <span class="text-2xl">√ó</span> </button>
     </div>
     <div class="space-y-4">
      <div><label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå CSV</label> <input type="file" id="import-file" accept=".csv" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
      </div>
      <div class="text-xs text-gray-500">
       <p>‚Ä¢ ‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö CSV</p>
       <p>‚Ä¢ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>
       <p>‚Ä¢ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö</p>
      </div>
      <div class="flex gap-3 pt-4"><button onclick="processImport()" class="flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"> üì§ ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ </button> <button onclick="closeImportModal()" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å </button>
      </div>
     </div>
    </div>
   </div><!-- Session Detail Modal -->
   <div id="session-detail-modal" class="session-detail-modal">
    <div class="modal-content w-full max-w-2xl">
     <div class="flex items-center justify-between mb-6">
      <h3 id="session-detail-title" class="text-xl font-bold text-gray-900">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß</h3><button onclick="closeSessionDetailModal()" class="text-gray-400 hover:text-gray-600"> <span class="text-2xl">√ó</span> </button>
     </div>
     <div id="session-detail-content" class="space-y-4"><!-- Content will be populated by JavaScript -->
     </div>
     <div class="flex gap-3 pt-6 border-t border-gray-200"><button onclick="closeSessionDetailModal()" class="flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"> ‡∏õ‡∏¥‡∏î </button>
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      school_name: '‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó‡∏û‡∏¥‡∏ó‡∏¢‡∏≤‡∏Ñ‡∏°',
      academic_year: '2568',
      period_text: '28 ‡∏ï.‡∏Ñ. 2568 ‚Äì 13 ‡∏°‡∏µ.‡∏Ñ. 2569'
    };

    // Data management
    let allData = [];
    let isAdmin = false;
    let editingId = null;
    let currentCalendarDate = new Date();

    // Admin credentials
    const ADMIN_CREDENTIALS = {
      username: 'admin',
      password: 'admin123'
    };

    // Initialize app
    function initializeApp() {
      loadData();
      loadUserSession();
      updateUserRole();
      updateUI();
      
      // Set default date to today
      const today = new Date().toISOString().split('T')[0];
      const dateInputs = document.querySelectorAll('input[type="date"]');
      dateInputs.forEach(input => {
        if (!input.value) {
          input.value = today;
        }
      });
    }

    // Data persistence
    function saveData() {
      localStorage.setItem('onet_tutoring_data', JSON.stringify(allData));
    }

    function loadData() {
      const saved = localStorage.getItem('onet_tutoring_data');
      if (saved) {
        try {
          allData = JSON.parse(saved);
        } catch (e) {
          allData = [];
        }
      }
    }

    // User session management
    function saveUserSession() {
      localStorage.setItem('onet_admin_session', JSON.stringify({ isAdmin, timestamp: Date.now() }));
    }

    function loadUserSession() {
      const session = localStorage.getItem('onet_admin_session');
      if (session) {
        try {
          const data = JSON.parse(session);
          // Session expires after 24 hours
          if (Date.now() - data.timestamp < 24 * 60 * 60 * 1000) {
            isAdmin = data.isAdmin;
          } else {
            localStorage.removeItem('onet_admin_session');
            isAdmin = false;
          }
        } catch (e) {
          isAdmin = false;
        }
      }
    }

    function login(username, password) {
      if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
        isAdmin = true;
        saveUserSession();
        updateUserRole();
        closeLoginModal();
        showNotification('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
        return true;
      }
      return false;
    }

    function logout() {
      isAdmin = false;
      localStorage.removeItem('onet_admin_session');
      updateUserRole();
      showNotification('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'info');
    }

    function updateUserRole() {
      const badge = document.getElementById('user-role-badge');
      const loginBtn = document.getElementById('login-logout-btn');
      const roleText = document.getElementById('current-role-text');
      const body = document.body;
      
      if (isAdmin) {
        badge.innerHTML = 'üîß ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
        badge.className = 'user-role-badge role-admin';
        loginBtn.innerHTML = 'üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö';
        loginBtn.onclick = logout;
        loginBtn.className = 'px-3 py-1 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 transition-colors';
        body.classList.add('admin-mode');
        if (roleText) roleText.textContent = '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
      } else {
        badge.innerHTML = 'üë§ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
        badge.className = 'user-role-badge role-viewer';
        loginBtn.innerHTML = 'üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö';
        loginBtn.onclick = showLoginModal;
        loginBtn.className = 'px-3 py-1 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors';
        body.classList.remove('admin-mode');
        if (roleText) roleText.textContent = '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
      }
    }

    // UI Updates
    function updateUI() {
      updateDashboardStats();
      updateCalendar();
      updateTodaySessions();
      updateSessionsList();
      updateAttendanceList();
      updateReports();
      updateSchedule();
      updateMasters();
      updateTotalRecords();
    }

    function updateTotalRecords() {
      const totalElements = document.querySelectorAll('#total-records, #settings-total-records');
      totalElements.forEach(el => {
        if (el) el.textContent = allData.length;
      });
    }

    function updateDashboardStats() {
      const sessions = allData.filter(record => record.type === 'session');
      const attendance = allData.filter(record => record.type === 'attendance');
      
      // Update main stats
      document.getElementById('stat-sessions').textContent = sessions.length;
      document.getElementById('stat-attendance').textContent = attendance.length;
      
      // Update quick stats
      const quickStatSessions = document.getElementById('quick-stat-sessions');
      const quickStatAttendance = document.getElementById('quick-stat-attendance');
      const quickStatRate = document.getElementById('quick-stat-rate');
      
      if (quickStatSessions) quickStatSessions.textContent = sessions.length;
      if (quickStatAttendance) quickStatAttendance.textContent = attendance.length;
      
      // Calculate attendance rate
      const presentCount = attendance.filter(record => record.status === 'P').length;
      const rate = attendance.length > 0 ? Math.round((presentCount / attendance.length) * 100) : 0;
      document.getElementById('stat-rate').textContent = `${rate}%`;
      if (quickStatRate) quickStatRate.textContent = `${rate}%`;
      
      // Calculate at-risk students (simplified)
      const riskCount = Math.max(0, Math.floor(attendance.length * 0.1));
      document.getElementById('stat-risk').textContent = riskCount;
    }

    function updateCalendar() {
      const container = document.getElementById('calendar-container');
      const monthYearElement = document.getElementById('calendar-month-year');
      
      const year = currentCalendarDate.getFullYear();
      const month = currentCalendarDate.getMonth();
      
      // Update month/year display
      const thaiMonths = [
        '‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå', '‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°', '‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô', '‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°', '‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô',
        '‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°', '‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô', '‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°', '‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô', '‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°'
      ];
      const thaiYear = year + 543;
      monthYearElement.textContent = `${thaiMonths[month]} ${thaiYear}`;
      
      // Get sessions for this month
      const sessions = allData.filter(record => record.type === 'session');
      const sessionsByDate = {};
      sessions.forEach(session => {
        const date = session.date;
        if (!sessionsByDate[date]) {
          sessionsByDate[date] = [];
        }
        sessionsByDate[date].push(session);
      });
      
      // Generate calendar
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const startDate = new Date(firstDay);
      startDate.setDate(startDate.getDate() - firstDay.getDay());
      
      const today = new Date();
      const todayStr = today.toISOString().split('T')[0];
      
      let calendarHTML = `
        <div class="calendar-grid">
          <div class="calendar-header">‡∏≠‡∏≤</div>
          <div class="calendar-header">‡∏à</div>
          <div class="calendar-header">‡∏≠</div>
          <div class="calendar-header">‡∏û</div>
          <div class="calendar-header">‡∏û‡∏§</div>
          <div class="calendar-header">‡∏®</div>
          <div class="calendar-header">‡∏™</div>
      `;
      
      for (let i = 0; i < 42; i++) {
        const currentDate = new Date(startDate);
        currentDate.setDate(startDate.getDate() + i);
        
        const dateStr = currentDate.toISOString().split('T')[0];
        const dayNumber = currentDate.getDate();
        const isCurrentMonth = currentDate.getMonth() === month;
        const isToday = dateStr === todayStr;
        const hasSessions = sessionsByDate[dateStr] && sessionsByDate[dateStr].length > 0;
        
        let dayClass = 'calendar-day';
        if (!isCurrentMonth) dayClass += ' other-month';
        if (isToday) dayClass += ' today';
        if (hasSessions) dayClass += ' has-sessions';
        
        const sessionsCount = hasSessions ? sessionsByDate[dateStr].length : 0;
        
        calendarHTML += `
          <div class="${dayClass}" onclick="showDateSessions('${dateStr}')">
            <span class="calendar-day-number">${dayNumber}</span>
            ${hasSessions ? `<span class="calendar-sessions-count">${sessionsCount}</span>` : ''}
          </div>
        `;
      }
      
      calendarHTML += '</div>';
      container.innerHTML = calendarHTML;
    }

    function updateTodaySessions() {
      const container = document.getElementById('today-sessions');
      const today = new Date().toISOString().split('T')[0];
      const todaySessions = allData.filter(record => 
        record.type === 'session' && record.date === today
      );
      
      if (todaySessions.length === 0) {
        container.innerHTML = `
          <div class="text-center text-gray-500 py-8">
            <span class="text-4xl mb-2 block">üìÖ</span>
            <p class="text-sm">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
            <p class="text-xs text-gray-400 mt-1">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ô‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = todaySessions.map(session => `
        <div class="flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg hover:shadow-md transition-all">
          <div class="flex items-center gap-4">
            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
              <span class="text-xl">üìö</span>
            </div>
            <div>
              <div class="text-base font-semibold text-gray-900">${session.subject}</div>
              <div class="text-sm text-gray-600">${session.teacher} | ${session.class_name}</div>
              <div class="flex items-center gap-3 mt-1">
                <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">‡∏´‡πâ‡∏≠‡∏á ${session.classroom}</span>
                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">${session.time}</span>
              </div>
            </div>
          </div>
          <div class="admin-only flex gap-2">
            <button onclick="editSession('${session.id}')" class="px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-xs hover:bg-blue-200 transition-colors font-medium">
              ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
            </button>
          </div>
        </div>
      `).join('');
    }

    function previousMonth() {
      currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1);
      updateCalendar();
    }

    function nextMonth() {
      currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1);
      updateCalendar();
    }

    function showDateSessions(dateStr) {
      const sessions = allData.filter(record => 
        record.type === 'session' && record.date === dateStr
      );
      
      if (sessions.length === 0) {
        showNotification('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ', 'info');
        return;
      }
      
      const date = new Date(dateStr);
      const thaiDate = date.toLocaleDateString('th-TH', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
      
      document.getElementById('session-detail-title').textContent = `‡∏Ñ‡∏≤‡∏ö‡∏ï‡∏¥‡∏ß ${thaiDate}`;
      
      const content = sessions.map(session => `
        <div class="border border-gray-200 rounded-lg p-4">
          <div class="flex items-start justify-between">
            <div class="flex items-start gap-3 flex-1">
              <span class="text-xl">üìö</span>
              <div class="flex-1">
                <div class="flex items-center gap-2 mb-2">
                  <h4 class="text-base font-semibold text-gray-900">${session.subject}</h4>
                  <span class="status-badge status-done">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß</span>
                </div>
                <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                  <div><strong>‡∏Ñ‡∏£‡∏π:</strong> ${session.teacher}</div>
                  <div><strong>‡∏´‡πâ‡∏≠‡∏á:</strong> ${session.class_name}</div>
                  <div><strong>‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</strong> ${session.classroom}</div>
                  <div><strong>‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${session.time}</div>
                </div>
              </div>
            </div>
            <div class="admin-only flex gap-2 ml-4">
              <button onclick="editSession('${session.id}'); closeSessionDetailModal();" class="px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200 transition-colors">
                ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
              </button>
              <button onclick="deleteRecord('${session.id}', '‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô'); closeSessionDetailModal();" class="px-3 py-1 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200 transition-colors">
                üóëÔ∏è ‡∏•‡∏ö
              </button>
            </div>
          </div>
        </div>
      `).join('');
      
      document.getElementById('session-detail-content').innerHTML = content;
      document.getElementById('session-detail-modal').classList.add('show');
    }

    function closeSessionDetailModal() {
      document.getElementById('session-detail-modal').classList.remove('show');
    }

    function updateSessionsList() {
      const container = document.getElementById('sessions-list');
      const sessions = allData.filter(record => record.type === 'session').reverse();
      
      if (sessions.length === 0) {
        container.innerHTML = `
          <div class="text-center text-gray-500 py-8">
            <span class="text-4xl mb-4 block">üìã</span>
            <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≤‡∏ö‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</p>
            <p class="text-xs text-gray-400 mt-1">‡∏Ñ‡∏•‡∏¥‡∏Å "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≤‡∏ö‡πÉ‡∏´‡∏°‡πà" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = sessions.map(session => `
        <div class="border border-gray-200 rounded-lg p-4 mb-4">
          <div class="flex items-start justify-between">
            <div class="flex items-start gap-3 flex-1">
              <input type="checkbox" value="${session.id}" class="session-checkbox mt-1 rounded border-gray-300" onchange="updateSelectedSessionsCount()">
              <div class="flex-1">
                <div class="flex items-center gap-2 mb-2">
                  <span class="text-lg">üìö</span>
                  <h4 class="text-base font-semibold text-gray-900">${session.subject}</h4>
                  <span class="status-badge status-done">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß</span>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-gray-600">
                  <div><strong>‡∏Ñ‡∏£‡∏π:</strong> ${session.teacher}</div>
                  <div><strong>‡∏´‡πâ‡∏≠‡∏á:</strong> ${session.class_name}</div>
                  <div><strong>‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</strong> ${session.classroom}</div>
                  <div><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${new Date(session.date).toLocaleDateString('th-TH')}</div>
                  <div><strong>‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${session.time}</div>
                  <div><strong>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠:</strong> ${new Date(session.created_at).toLocaleString('th-TH')}</div>
                </div>
              </div>
            </div>
            <div class="flex gap-2 ml-4">
              <button onclick="editSession('${session.id}')" class="px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200 transition-colors">
                ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
              </button>
              <button onclick="deleteRecord('${session.id}', '‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô')" class="px-3 py-1 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200 transition-colors">
                üóëÔ∏è ‡∏•‡∏ö
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }

    function updateAttendanceList() {
      const container = document.getElementById('attendance-list');
      const attendance = allData.filter(record => record.type === 'attendance').reverse();
      
      if (attendance.length === 0) {
        container.innerHTML = `
          <div class="text-center text-gray-500 py-8">
            <span class="text-4xl mb-4 block">‚úÖ</span>
            <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</p>
            <p class="text-xs text-gray-400 mt-1">‡∏Ñ‡∏•‡∏¥‡∏Å "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = attendance.map(record => {
        const statusClass = {
          'P': 'bg-green-100 text-green-800',
          'L': 'bg-yellow-100 text-yellow-800',
          'A': 'bg-red-100 text-red-800',
          'E': 'bg-blue-100 text-blue-800'
        }[record.status] || 'bg-gray-100 text-gray-800';
        
        const statusText = {
          'P': '‡∏°‡∏≤',
          'L': '‡∏™‡∏≤‡∏¢',
          'A': '‡∏Ç‡∏≤‡∏î',
          'E': '‡∏•‡∏≤'
        }[record.status] || record.status;
        
        return `
          <div class="border border-gray-200 rounded-lg p-4 mb-4">
            <div class="flex items-start justify-between">
              <div class="flex items-start gap-3 flex-1">
                <input type="checkbox" value="${record.id}" class="attendance-checkbox mt-1 rounded border-gray-300" onchange="updateSelectedAttendanceCount()">
                <div class="flex-1">
                  <div class="flex items-center gap-3 mb-2">
                    <span class="text-lg">üë§</span>
                    <div>
                      <h4 class="text-base font-semibold text-gray-900">${record.student_name}</h4>
                      <p class="text-sm text-gray-600">${record.student_id} | ${record.class_name}</p>
                    </div>
                    <span class="px-3 py-1 rounded-full text-xs font-medium ${statusClass}">
                      ${record.status} - ${statusText}
                    </span>
                  </div>
                  <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-gray-600">
                    <div><strong>‡∏ß‡∏¥‡∏ä‡∏≤:</strong> ${record.subject}</div>
                    <div><strong>‡∏Ñ‡∏£‡∏π:</strong> ${record.teacher}</div>
                    <div><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${new Date(record.date).toLocaleDateString('th-TH')}</div>
                    <div><strong>‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${record.time}</div>
                    <div class="md:col-span-2"><strong>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠:</strong> ${new Date(record.created_at).toLocaleString('th-TH')}</div>
                  </div>
                </div>
              </div>
              <div class="flex gap-2 ml-4">
                <button onclick="editAttendance('${record.id}')" class="px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200 transition-colors">
                  ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                </button>
                <button onclick="deleteRecord('${record.id}', '‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠')" class="px-3 py-1 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200 transition-colors">
                  üóëÔ∏è ‡∏•‡∏ö
                </button>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    function updateReports() {
      const sessions = allData.filter(record => record.type === 'session');
      const attendance = allData.filter(record => record.type === 'attendance');
      
      document.getElementById('report-total-sessions').textContent = sessions.length;
      document.getElementById('report-total-attendance').textContent = attendance.length;
      
      const presentCount = attendance.filter(record => record.status === 'P').length;
      const rate = attendance.length > 0 ? Math.round((presentCount / attendance.length) * 100) : 0;
      document.getElementById('report-avg-rate').textContent = `${rate}%`;
      
      // Update reports table
      const tableContainer = document.getElementById('reports-table');
      if (allData.length === 0) {
        tableContainer.innerHTML = `
          <div class="text-center text-gray-500 py-8">
            <span class="text-4xl mb-4 block">üìä</span>
            <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</p>
            <p class="text-xs text-gray-400 mt-1">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</p>
          </div>
        `;
        return;
      }
      
      // Create summary by subject
      const subjectStats = {};
      sessions.forEach(session => {
        if (!subjectStats[session.subject]) {
          subjectStats[session.subject] = { sessions: 0, attendance: 0, present: 0 };
        }
        subjectStats[session.subject].sessions++;
      });
      
      attendance.forEach(record => {
        if (!subjectStats[record.subject]) {
          subjectStats[record.subject] = { sessions: 0, attendance: 0, present: 0 };
        }
        subjectStats[record.subject].attendance++;
        if (record.status === 'P') {
          subjectStats[record.subject].present++;
        }
      });
      
      const tableRows = Object.entries(subjectStats).map(([subject, stats]) => {
        const rate = stats.attendance > 0 ? Math.round((stats.present / stats.attendance) * 100) : 0;
        return `
          <tr class="border-b border-gray-200">
            <td class="px-4 py-3 text-sm font-medium text-gray-900">${subject}</td>
            <td class="px-4 py-3 text-sm text-gray-600">${stats.sessions}</td>
            <td class="px-4 py-3 text-sm text-gray-600">${stats.attendance}</td>
            <td class="px-4 py-3 text-sm text-gray-600">${stats.present}</td>
            <td class="px-4 py-3 text-sm font-semibold ${rate >= 80 ? 'text-green-600' : 'text-red-600'}">${rate}%</td>
          </tr>
        `;
      }).join('');
      
      tableContainer.innerHTML = `
        <table class="w-full">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">‡∏ß‡∏¥‡∏ä‡∏≤</th>
              <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">‡∏Ñ‡∏≤‡∏ö</th>
              <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠</th>
              <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">‡∏°‡∏≤</th>
              <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">‡∏≠‡∏±‡∏ï‡∏£‡∏≤</th>
            </tr>
          </thead>
          <tbody>
            ${tableRows}
          </tbody>
        </table>
      `;
    }

    function updateSchedule() {
      const container = document.getElementById('schedule-content');
      const sessions = allData.filter(record => record.type === 'session');
      
      if (sessions.length === 0) {
        container.innerHTML = `
          <div class="text-center text-gray-500 py-8">
            <span class="text-4xl mb-4 block">üìÖ</span>
            <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß</p>
            <p class="text-xs text-gray-400 mt-1">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß</p>
          </div>
        `;
        return;
      }
      
      // Group sessions by date
      const sessionsByDate = {};
      sessions.forEach(session => {
        const date = session.date;
        if (!sessionsByDate[date]) {
          sessionsByDate[date] = [];
        }
        sessionsByDate[date].push(session);
      });
      
      const scheduleHtml = Object.entries(sessionsByDate)
        .sort(([a], [b]) => new Date(b) - new Date(a))
        .map(([date, dateSessions]) => {
          const dateStr = new Date(date).toLocaleDateString('th-TH', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          });
          
          const sessionCards = dateSessions.map(session => `
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
              <div class="flex items-center gap-2 mb-2">
                <span class="text-lg">üìö</span>
                <h4 class="text-base font-semibold text-gray-900">${session.subject}</h4>
              </div>
              <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                <div><strong>‡∏Ñ‡∏£‡∏π:</strong> ${session.teacher}</div>
                <div><strong>‡∏´‡πâ‡∏≠‡∏á:</strong> ${session.class_name}</div>
                <div><strong>‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</strong> ${session.classroom}</div>
                <div><strong>‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${session.time}</div>
              </div>
            </div>
          `).join('');
          
          return `
            <div class="mb-6">
              <h3 class="text-lg font-semibold text-gray-900 mb-4">${dateStr}</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                ${sessionCards}
              </div>
            </div>
          `;
        }).join('');
      
      container.innerHTML = scheduleHtml;
    }

    function updateMasters() {
      // Extract unique values
      const teachers = [...new Set(allData.filter(r => r.teacher).map(r => r.teacher))];
      const subjects = [...new Set(allData.filter(r => r.subject).map(r => r.subject))];
      const classes = [...new Set(allData.filter(r => r.class_name).map(r => r.class_name))];
      
      // Update teachers list
      const teachersList = document.getElementById('teachers-list');
      if (teachers.length === 0) {
        teachersList.innerHTML = '<div class="text-center text-gray-500 py-4"><p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏π</p></div>';
      } else {
        teachersList.innerHTML = teachers.map(teacher => 
          `<div class="px-3 py-2 bg-gray-50 rounded text-sm">${teacher}</div>`
        ).join('');
      }
      
      // Update subjects list
      const subjectsList = document.getElementById('subjects-list');
      if (subjects.length === 0) {
        subjectsList.innerHTML = '<div class="text-center text-gray-500 py-4"><p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏ä‡∏≤</p></div>';
      } else {
        subjectsList.innerHTML = subjects.map(subject => 
          `<div class="px-3 py-2 bg-gray-50 rounded text-sm">${subject}</div>`
        ).join('');
      }
      
      // Update classes list
      const classesList = document.getElementById('classes-list');
      if (classes.length === 0) {
        classesList.innerHTML = '<div class="text-center text-gray-500 py-4"><p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á</p></div>';
      } else {
        classesList.innerHTML = classes.map(className => 
          `<div class="px-3 py-2 bg-gray-50 rounded text-sm">${className}</div>`
        ).join('');
      }
    }

    // CRUD Operations
    function saveSession(sessionData) {
      const record = {
        id: editingId || `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
        type: 'session',
        ...sessionData,
        created_at: editingId ? allData.find(r => r.id === editingId)?.created_at || new Date().toISOString() : new Date().toISOString(),
        updated_at: editingId ? new Date().toISOString() : undefined
      };
      
      if (editingId) {
        const index = allData.findIndex(r => r.id === editingId);
        if (index !== -1) {
          allData[index] = record;
          showNotification('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
        }
      } else {
        allData.push(record);
        showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
      }
      
      saveData();
      updateUI();
      closeSessionModal();
    }

    function saveAttendance(attendanceData) {
      const record = {
        id: editingId || `attendance_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
        type: 'attendance',
        ...attendanceData,
        created_at: editingId ? allData.find(r => r.id === editingId)?.created_at || new Date().toISOString() : new Date().toISOString(),
        updated_at: editingId ? new Date().toISOString() : undefined
      };
      
      if (editingId) {
        const index = allData.findIndex(r => r.id === editingId);
        if (index !== -1) {
          allData[index] = record;
          showNotification('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
        }
      } else {
        allData.push(record);
        showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
      }
      
      saveData();
      updateUI();
      closeAttendanceModal();
    }

    function deleteRecord(id, type) {
      showConfirmModal(
        '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö',
        `‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö${type}‡∏ô‡∏µ‡πâ?`,
        () => {
          const index = allData.findIndex(r => r.id === id);
          if (index !== -1) {
            allData.splice(index, 1);
            saveData();
            updateUI();
            showNotification(`‡∏•‡∏ö${type}‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`, 'success');
          }
          closeConfirmModal();
        }
      );
    }

    function resetAllData() {
      allData = [];
      saveData();
      updateUI();
      showNotification('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
    }

    // Modal Management
    function openSessionModal(id = null) {
      editingId = id;
      const modal = document.getElementById('session-modal');
      const title = document.getElementById('session-modal-title');
      const form = document.getElementById('session-form');
      
      if (id) {
        const record = allData.find(r => r.id === id);
        if (record) {
          title.textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô';
          document.getElementById('session-subject').value = record.subject || '';
          document.getElementById('session-teacher').value = record.teacher || '';
          document.getElementById('session-class').value = record.class_name || '';
          document.getElementById('session-classroom').value = record.classroom || '';
          document.getElementById('session-date').value = record.date || '';
          document.getElementById('session-time').value = record.time || '';
        }
      } else {
        title.textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≤‡∏ö‡πÉ‡∏´‡∏°‡πà';
        form.reset();
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('session-date').value = today;
      }
      
      modal.classList.add('show');
    }

    function closeSessionModal() {
      editingId = null;
      document.getElementById('session-modal').classList.remove('show');
      document.getElementById('session-form').reset();
    }

    function openAttendanceModal(id = null) {
      editingId = id;
      const modal = document.getElementById('attendance-modal');
      const title = document.getElementById('attendance-modal-title');
      const form = document.getElementById('attendance-form');
      
      if (id) {
        const record = allData.find(r => r.id === id);
        if (record) {
          title.textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠';
          document.getElementById('attendance-student-id').value = record.student_id || '';
          document.getElementById('attendance-student-name').value = record.student_name || '';
          document.getElementById('attendance-class').value = record.class_name || '';
          document.getElementById('attendance-status').value = record.status || '';
          document.getElementById('attendance-subject').value = record.subject || '';
          document.getElementById('attendance-teacher').value = record.teacher || '';
          document.getElementById('attendance-date').value = record.date || '';
          document.getElementById('attendance-time').value = record.time || '';
        }
      } else {
        title.textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠';
        form.reset();
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('attendance-date').value = today;
      }
      
      modal.classList.add('show');
    }

    function closeAttendanceModal() {
      editingId = null;
      document.getElementById('attendance-modal').classList.remove('show');
      document.getElementById('attendance-form').reset();
    }

    function showConfirmModal(title, message, onConfirm) {
      document.getElementById('confirm-title').textContent = title;
      document.getElementById('confirm-message').textContent = message;
      document.getElementById('confirm-action-btn').onclick = onConfirm;
      document.getElementById('confirm-modal').classList.add('show');
    }

    function closeConfirmModal() {
      document.getElementById('confirm-modal').classList.remove('show');
    }

    function confirmResetData() {
      showConfirmModal(
        '‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
        '‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î? ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ',
        () => {
          resetAllData();
          closeConfirmModal();
        }
      );
    }

    // Login modal functions
    function showLoginModal() {
      document.getElementById('login-modal').classList.add('show');
      document.getElementById('login-error').classList.add('hidden');
      document.getElementById('login-form').reset();
    }

    function closeLoginModal() {
      document.getElementById('login-modal').classList.remove('show');
      document.getElementById('login-form').reset();
      document.getElementById('login-error').classList.add('hidden');
    }

    // Edit functions
    function editSession(id) {
      openSessionModal(id);
    }

    function editAttendance(id) {
      openAttendanceModal(id);
    }

    // Bulk operations for sessions
    function toggleSelectAllSessions() {
      const selectAll = document.getElementById('select-all-sessions');
      const checkboxes = document.querySelectorAll('.session-checkbox');
      
      checkboxes.forEach(checkbox => {
        checkbox.checked = selectAll.checked;
      });
      
      updateSelectedSessionsCount();
    }

    function updateSelectedSessionsCount() {
      const checkboxes = document.querySelectorAll('.session-checkbox:checked');
      const count = checkboxes.length;
      const countElement = document.getElementById('selected-sessions-count');
      const countNumber = document.getElementById('sessions-count');
      
      if (count > 0) {
        countElement.classList.remove('hidden');
        countNumber.textContent = count;
      } else {
        countElement.classList.add('hidden');
      }
    }

    function bulkDeleteSessions() {
      const checkboxes = document.querySelectorAll('.session-checkbox:checked');
      const selectedIds = Array.from(checkboxes).map(cb => cb.value);
      
      if (selectedIds.length === 0) {
        showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≤‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö', 'error');
        return;
      }
      
      showConfirmModal(
        '‡∏•‡∏ö‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£',
        `‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ${selectedIds.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?`,
        () => {
          selectedIds.forEach(id => {
            const index = allData.findIndex(r => r.id === id);
            if (index !== -1) {
              allData.splice(index, 1);
            }
          });
          
          saveData();
          updateUI();
          showNotification(`‡∏•‡∏ö‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ${selectedIds.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`, 'success');
          closeConfirmModal();
        }
      );
    }

    function duplicateSession() {
      const checkboxes = document.querySelectorAll('.session-checkbox:checked');
      const selectedIds = Array.from(checkboxes).map(cb => cb.value);
      
      if (selectedIds.length === 0) {
        showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≤‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å', 'error');
        return;
      }
      
      if (selectedIds.length > 1) {
        showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏µ‡∏¢‡∏á 1 ‡∏Ñ‡∏≤‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å', 'error');
        return;
      }
      
      const originalSession = allData.find(r => r.id === selectedIds[0]);
      if (originalSession) {
        const duplicatedSession = {
          ...originalSession,
          id: `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
          created_at: new Date().toISOString(),
          updated_at: undefined
        };
        
        allData.push(duplicatedSession);
        saveData();
        updateUI();
        showNotification('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
      }
    }

    // Bulk operations for attendance
    function toggleSelectAllAttendance() {
      const selectAll = document.getElementById('select-all-attendance');
      const checkboxes = document.querySelectorAll('.attendance-checkbox');
      
      checkboxes.forEach(checkbox => {
        checkbox.checked = selectAll.checked;
      });
      
      updateSelectedAttendanceCount();
    }

    function updateSelectedAttendanceCount() {
      const checkboxes = document.querySelectorAll('.attendance-checkbox:checked');
      const count = checkboxes.length;
      const countElement = document.getElementById('selected-attendance-count');
      const countNumber = document.getElementById('attendance-count');
      
      if (count > 0) {
        countElement.classList.remove('hidden');
        countNumber.textContent = count;
      } else {
        countElement.classList.add('hidden');
      }
    }

    function bulkDeleteAttendance() {
      const checkboxes = document.querySelectorAll('.attendance-checkbox:checked');
      const selectedIds = Array.from(checkboxes).map(cb => cb.value);
      
      if (selectedIds.length === 0) {
        showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö', 'error');
        return;
      }
      
      showConfirmModal(
        '‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£',
        `‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ${selectedIds.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?`,
        () => {
          selectedIds.forEach(id => {
            const index = allData.findIndex(r => r.id === id);
            if (index !== -1) {
              allData.splice(index, 1);
            }
          });
          
          saveData();
          updateUI();
          showNotification(`‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ${selectedIds.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`, 'success');
          closeConfirmModal();
        }
      );
    }

    function bulkAttendanceEntry() {
      showNotification('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏ä‡πá‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏π‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤', 'info');
      // This could open a modal for bulk attendance entry
    }

    // Sample schedule data
    function loadSampleSchedule() {
      showConfirmModal(
        '‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á',
        '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö',
        () => {
          const sampleScheduleData = generateSampleScheduleData();
          allData.push(...sampleScheduleData);
          saveData();
          updateUI();
          showNotification(`‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏¥‡∏ß‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ${sampleScheduleData.length} ‡∏Ñ‡∏≤‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô`, 'success');
          closeConfirmModal();
        }
      );
    }

    function generateSampleScheduleData() {
      const scheduleData = [];
      
      // Define the schedule structure based on your table
      const scheduleTemplate = [
        // Week 1
        {
          week: 1,
          sessions: [
            {
              day: '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£',
              date: '2568-10-28',
              time: '08:00-09:30',
              classes: [
                { class: '‡∏°.6/1', room: '235', subject: '‡∏ä‡∏µ‡∏ß‡∏∞', teacher: '‡∏Ñ‡∏£‡∏π‡∏ò‡∏µ‡∏£‡∏≤‡∏†‡∏£‡∏ì‡πå' },
                { class: '‡∏°.6/2', room: '242', subject: '‡πÄ‡∏Ñ‡∏°‡∏µ', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏∏‡∏à‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/3', room: '243', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏ì‡∏±‡∏ê‡∏ò‡∏¥‡∏î‡∏≤' },
                { class: '‡∏°.6/10', room: '644', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡∏ô‡∏±‡∏ä‡∏ô‡∏±‡∏ô‡∏ó‡πå' },
                { class: '‡∏°.6/11', room: '547', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏õ‡∏ì‡∏¥‡∏ï‡∏≤' },
                { class: '‡∏°.6/4', room: '244', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏õ‡∏¥‡∏¢‡∏∞‡∏û‡∏£' },
                { class: '‡∏°.6/5', room: '245', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏ä‡∏•‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå' },
                { class: '‡∏°.6/6', room: '246', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏ß‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/7', room: '447', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 3', teacher: '‡∏Ñ‡∏£‡∏π‡∏î‡∏∏‡∏à‡∏î‡∏≤‡∏ß' },
                { class: '‡∏°.6/8', room: '448', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏ä‡∏•‡∏µ‡∏£‡∏±‡∏ï‡∏ô‡πå' },
                { class: '‡∏°.6/9', room: '437', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡πÄ‡∏û‡πá‡∏ç‡∏û‡∏£‡∏£‡∏ì‡∏µ' }
              ]
            },
            {
              day: '‡∏®‡∏∏‡∏Å‡∏£‡πå',
              date: '2568-10-31',
              time: '08:00-09:30',
              classes: [
                { class: '‡∏°.6/1', room: '235', subject: '‡πÄ‡∏Ñ‡∏°‡∏µ', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏∏‡∏à‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/2', room: '242', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏ò‡∏±‡∏ç‡∏ç‡∏≤‡∏ß‡∏£‡∏£‡∏ì' },
                { class: '‡∏°.6/3', room: '243', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏±‡∏á‡∏Ñ‡∏ì‡∏≤' },
                { class: '‡∏°.6/10', room: '644', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏à‡∏¥‡∏ì‡∏ì‡πå' },
                { class: '‡∏°.6/11', room: '547', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏•' },
                { class: '‡∏°.6/4', room: '244', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏¢‡∏∏‡∏î‡∏≤‡∏ß‡∏î‡∏µ' },
                { class: '‡∏°.6/5', room: '245', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏ß‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/6', room: '246', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 3', teacher: '‡∏Ñ‡∏£‡∏π‡∏ì‡∏±‡∏ê‡∏§‡∏ó‡∏±‡∏¢' },
                { class: '‡∏°.6/7', room: '447', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏±‡∏ï‡∏ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå' },
                { class: '‡∏°.6/8', room: '448', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡∏ß‡∏¥‡∏•‡∏≤‡∏ß‡∏£‡∏£‡∏ì' },
                { class: '‡∏°.6/9', room: '437', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏°‡∏ô‡∏±‡∏™‡∏ß‡∏µ‡∏£‡πå' }
              ]
            }
          ]
        },
        // Week 2
        {
          week: 2,
          sessions: [
            {
              day: '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£',
              date: '2568-11-04',
              time: '08:00-09:30',
              classes: [
                { class: '‡∏°.6/1', room: '235', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏ì‡∏±‡∏ê‡∏ò‡∏¥‡∏î‡∏≤' },
                { class: '‡∏°.6/2', room: '242', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡∏ô‡∏±‡∏ä‡∏ô‡∏±‡∏ô‡∏ó‡πå' },
                { class: '‡∏°.6/3', room: '243', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏õ‡∏ì‡∏¥‡∏ï‡∏≤' },
                { class: '‡∏°.6/10', room: '644', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏õ‡∏∏‡∏ç‡∏¢‡∏ô‡∏∏‡∏ä' },
                { class: '‡∏°.6/11', room: '547', subject: '‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå', teacher: '‡∏Ñ‡∏£‡∏π‡∏®‡∏£‡∏±‡∏ì‡∏¢‡πå' },
                { class: '‡∏°.6/4', room: '244', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏ß‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/5', room: '245', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 3', teacher: '‡∏Ñ‡∏£‡∏π‡∏î‡∏∏‡∏à‡∏î‡∏≤‡∏ß' },
                { class: '‡∏°.6/6', room: '246', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏ä‡∏•‡∏µ‡∏£‡∏±‡∏ï‡∏ô‡πå' },
                { class: '‡∏°.6/7', room: '447', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡πÄ‡∏û‡πá‡∏ç‡∏û‡∏£‡∏£‡∏ì‡∏µ' },
                { class: '‡∏°.6/8', room: '448', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏ò‡∏±‡∏ç‡∏¢‡∏î‡∏≤' },
                { class: '‡∏°.6/9', room: '437', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏õ‡∏¥‡∏¢‡∏∞‡∏û‡∏£' }
              ]
            },
            {
              day: '‡∏®‡∏∏‡∏Å‡∏£‡πå',
              date: '2568-11-07',
              time: '08:00-09:30',
              classes: [
                { class: '‡∏°.6/1', room: '235', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏±‡∏á‡∏Ñ‡∏ì‡∏≤' },
                { class: '‡∏°.6/2', room: '242', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏°‡∏ô‡∏±‡∏™‡∏ß‡∏µ‡∏£‡πå' },
                { class: '‡∏°.6/3', room: '243', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏™‡∏¥‡∏£‡∏¥‡∏£‡∏±‡∏ï‡∏ô‡πå' },
                { class: '‡∏°.6/10', room: '644', subject: '‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå', teacher: '‡∏Ñ‡∏£‡∏π‡∏™‡∏∏‡∏ò‡∏≤‡∏™‡∏¥‡∏ô‡∏µ' },
                { class: '‡∏°.6/11', room: '547', subject: '‡∏ä‡∏µ‡∏ß‡∏∞', teacher: '‡∏Ñ‡∏£‡∏π‡∏ô‡∏§‡∏°‡∏•' },
                { class: '‡∏°.6/4', room: '244', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 3', teacher: '‡∏Ñ‡∏£‡∏π‡∏ì‡∏±‡∏ê‡∏§‡∏ó‡∏±‡∏¢' },
                { class: '‡∏°.6/5', room: '245', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏±‡∏ï‡∏ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå' },
                { class: '‡∏°.6/6', room: '246', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡∏ß‡∏¥‡∏•‡∏≤‡∏ß‡∏£‡∏£‡∏ì' },
                { class: '‡∏°.6/7', room: '447', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏à‡∏¥‡∏ì‡∏ì‡πå' },
                { class: '‡∏°.6/8', room: '448', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏•' },
                { class: '‡∏°.6/9', room: '437', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏¢‡∏∏‡∏î‡∏≤‡∏ß‡∏î‡∏µ' }
              ]
            }
          ]
        },
        // Week 3
        {
          week: 3,
          sessions: [
            {
              day: '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£',
              date: '2568-11-11',
              time: '08:00-09:30',
              classes: [
                { class: '‡∏°.6/1', room: '235', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏ò‡∏±‡∏ç‡∏¢‡∏î‡∏≤' },
                { class: '‡∏°.6/2', room: '242', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏õ‡∏¥‡∏¢‡∏∞‡∏û‡∏£' },
                { class: '‡∏°.6/3', room: '243', subject: '‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå', teacher: '‡∏Ñ‡∏£‡∏π‡∏®‡∏£‡∏±‡∏ì‡∏¢‡πå' },
                { class: '‡∏°.6/10', room: '644', subject: '‡∏ä‡∏µ‡∏ß‡∏∞', teacher: '‡∏Ñ‡∏£‡∏π‡∏ò‡∏µ‡∏£‡∏≤‡∏†‡∏£‡∏ì‡πå' },
                { class: '‡∏°.6/11', room: '547', subject: '‡πÄ‡∏Ñ‡∏°‡∏µ', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏∏‡∏à‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/4', room: '244', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏ä‡∏•‡∏µ‡∏£‡∏±‡∏ï‡∏ô‡πå' },
                { class: '‡∏°.6/5', room: '245', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡πÄ‡∏û‡πá‡∏ç‡∏û‡∏£‡∏£‡∏ì‡∏µ' },
                { class: '‡∏°.6/6', room: '246', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏õ‡∏ì‡∏¥‡∏ï‡∏≤' },
                { class: '‡∏°.6/7', room: '447', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏õ‡∏∏‡∏ç‡∏¢‡∏ô‡∏∏‡∏ä' },
                { class: '‡∏°.6/8', room: '448', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏ä‡∏•‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå' },
                { class: '‡∏°.6/9', room: '437', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏ß‡∏¥‡∏†‡∏≤' }
              ]
            },
            {
              day: '‡∏®‡∏∏‡∏Å‡∏£‡πå',
              date: '2568-11-14',
              time: '08:00-09:30',
              classes: [
                { class: '‡∏°.6/1', room: '235', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏™‡∏¥‡∏£‡∏¥‡∏£‡∏±‡∏ï‡∏ô‡πå' },
                { class: '‡∏°.6/2', room: '242', subject: '‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå', teacher: '‡∏Ñ‡∏£‡∏π‡∏™‡∏∏‡∏ò‡∏≤‡∏™‡∏¥‡∏ô‡∏µ' },
                { class: '‡∏°.6/3', room: '243', subject: '‡∏ä‡∏µ‡∏ß‡∏∞', teacher: '‡∏Ñ‡∏£‡∏π‡∏ô‡∏§‡∏°‡∏•' },
                { class: '‡∏°.6/10', room: '644', subject: '‡πÄ‡∏Ñ‡∏°‡∏µ', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏∏‡∏à‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/11', room: '547', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏ò‡∏±‡∏ç‡∏ç‡∏≤‡∏ß‡∏£‡∏£‡∏ì' },
                { class: '‡∏°.6/4', room: '244', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡∏ß‡∏¥‡∏•‡∏≤‡∏ß‡∏£‡∏£‡∏ì' },
                { class: '‡∏°.6/5', room: '245', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏à‡∏¥‡∏ì‡∏ì‡πå' },
                { class: '‡∏°.6/6', room: '246', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏•' },
                { class: '‡∏°.6/7', room: '447', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏¢‡∏∏‡∏î‡∏≤‡∏ß‡∏î‡∏µ' },
                { class: '‡∏°.6/8', room: '448', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏ß‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/9', room: '437', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 3', teacher: '‡∏Ñ‡∏£‡∏π‡∏ì‡∏±‡∏ê‡∏§‡∏ó‡∏±‡∏¢' }
              ]
            }
          ]
        },
        // Week 5 (Skip week 4 as it's external activities)
        {
          week: 5,
          sessions: [
            {
              day: '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£',
              date: '2568-11-25',
              time: '08:00-09:30',
              classes: [
                { class: '‡∏°.6/1', room: '235', subject: '‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå', teacher: '‡∏Ñ‡∏£‡∏π‡∏®‡∏£‡∏±‡∏ì‡∏¢‡πå' },
                { class: '‡∏°.6/2', room: '242', subject: '‡∏ä‡∏µ‡∏ß‡∏∞', teacher: '‡∏Ñ‡∏£‡∏π‡∏ò‡∏µ‡∏£‡∏≤‡∏†‡∏£‡∏ì‡πå' },
                { class: '‡∏°.6/3', room: '243', subject: '‡πÄ‡∏Ñ‡∏°‡∏µ', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏∏‡∏à‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/10', room: '644', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏ì‡∏±‡∏ê‡∏ò‡∏¥‡∏î‡∏≤' },
                { class: '‡∏°.6/11', room: '547', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡πÄ‡∏û‡πá‡∏ç‡∏û‡∏£‡∏£‡∏ì‡∏µ' },
                { class: '‡∏°.6/4', room: '244', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏ò‡∏±‡∏ç‡∏¢‡∏î‡∏≤' },
                { class: '‡∏°.6/5', room: '245', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏õ‡∏¥‡∏¢‡∏∞‡∏û‡∏£' },
                { class: '‡∏°.6/6', room: '246', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏ä‡∏•‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå' },
                { class: '‡∏°.6/7', room: '447', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏ß‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/8', room: '448', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 3', teacher: '‡∏Ñ‡∏£‡∏π‡∏î‡∏∏‡∏à‡∏î‡∏≤‡∏ß' },
                { class: '‡∏°.6/9', room: '437', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏ä‡∏•‡∏µ‡∏£‡∏±‡∏ï‡∏ô‡πå' }
              ]
            },
            {
              day: '‡∏®‡∏∏‡∏Å‡∏£‡πå',
              date: '2568-11-28',
              time: '08:00-09:30',
              classes: [
                { class: '‡∏°.6/1', room: '235', subject: '‡∏ä‡∏µ‡∏ß‡∏∞', teacher: '‡∏Ñ‡∏£‡∏π‡∏ô‡∏§‡∏°‡∏•' },
                { class: '‡∏°.6/2', room: '242', subject: '‡πÄ‡∏Ñ‡∏°‡∏µ', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏∏‡∏à‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/3', room: '243', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏±‡∏ï‡∏ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå' },
                { class: '‡∏°.6/10', room: '644', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡∏ß‡∏¥‡∏•‡∏≤‡∏ß‡∏£‡∏£‡∏ì' },
                { class: '‡∏°.6/11', room: '547', subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', teacher: '‡∏Ñ‡∏£‡∏π‡∏à‡∏¥‡∏ì‡∏ì‡πå' },
                { class: '‡∏°.6/4', room: '244', subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏•' },
                { class: '‡∏°.6/5', room: '245', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1', teacher: '‡∏Ñ‡∏£‡∏π‡∏¢‡∏∏‡∏î‡∏≤‡∏ß‡∏î‡∏µ' },
                { class: '‡∏°.6/6', room: '246', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 2', teacher: '‡∏Ñ‡∏£‡∏π‡∏£‡∏ß‡∏¥‡∏†‡∏≤' },
                { class: '‡∏°.6/7', room: '447', subject: '‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 3', teacher: '‡∏Ñ‡∏£‡∏π‡∏ì‡∏±‡∏ê‡∏§‡∏ó‡∏±‡∏¢' },
                { class: '‡∏°.6/8', room: '448', subject: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°', teacher: '‡∏Ñ‡∏£‡∏π‡∏ò‡∏±‡∏ç‡∏ç‡∏≤‡∏ß‡∏£‡∏£‡∏ì' },
                { class: '‡∏°.6/9', room: '437', subject: '‡πÑ‡∏ó‡∏¢', teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏±‡∏á‡∏Ñ‡∏ì‡∏≤' }
              ]
            }
          ]
        }
      ];

      // Convert schedule template to session records
      scheduleTemplate.forEach(week => {
        week.sessions.forEach(session => {
          session.classes.forEach(classInfo => {
            const sessionRecord = {
              id: `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
              type: 'session',
              subject: classInfo.subject,
              teacher: classInfo.teacher,
              class_name: classInfo.class,
              classroom: classInfo.room,
              date: session.date,
              time: session.time,
              day: session.day,
              week: week.week,
              status: 'SCHEDULED',
              created_at: new Date().toISOString()
            };
            scheduleData.push(sessionRecord);
          });
        });
      });

      return scheduleData;
    }

    // Import/Export
    function exportData() {
      if (allData.length === 0) {
        showNotification('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å', 'info');
        return;
      }
      
      const csv = convertToCSV(allData);
      downloadCSV(csv, 'onet-tutoring-data.csv');
      showNotification('‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
    }

    function downloadSampleCSV() {
      const sampleData = [
        {
          id: 'session_sample_001',
          type: 'session',
          subject: '‡πÑ‡∏ó‡∏¢',
          teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏±‡∏á‡∏Ñ‡∏ì‡∏≤',
          class_name: '‡∏°.6/1',
          classroom: '235',
          date: '2568-10-28',
          time: '08:00-09:30',
          day: '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£',
          week: '1',
          status: 'DONE',
          created_at: '2024-01-15T08:00:00.000Z'
        },
        {
          id: 'attendance_sample_001',
          type: 'attendance',
          student_id: '68001',
          student_name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏°‡πÉ‡∏à ‡πÉ‡∏à‡∏î‡∏µ',
          class_name: '‡∏°.6/1',
          subject: '‡πÑ‡∏ó‡∏¢',
          teacher: '‡∏Ñ‡∏£‡∏π‡∏≠‡∏±‡∏á‡∏Ñ‡∏ì‡∏≤',
          classroom: '235',
          date: '2568-10-28',
          time: '08:00-09:30',
          status: 'P',
          created_at: '2024-01-15T08:30:00.000Z'
        },
        {
          id: 'session_sample_002',
          type: 'session',
          subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©',
          teacher: '‡∏Ñ‡∏£‡∏π‡∏õ‡∏ì‡∏¥‡∏ï‡∏≤',
          class_name: '‡∏°.6/2',
          classroom: '242',
          date: '2568-10-28',
          time: '09:45-11:15',
          day: '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£',
          week: '1',
          status: 'DONE',
          created_at: '2024-01-15T09:00:00.000Z'
        },
        {
          id: 'attendance_sample_002',
          type: 'attendance',
          student_id: '68002',
          student_name: '‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡∏î‡∏µ‡πÉ‡∏à',
          class_name: '‡∏°.6/2',
          subject: '‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©',
          teacher: '‡∏Ñ‡∏£‡∏π‡∏õ‡∏ì‡∏¥‡∏ï‡∏≤',
          classroom: '242',
          date: '2568-10-28',
          time: '09:45-11:15',
          status: 'L',
          created_at: '2024-01-15T10:00:00.000Z'
        },
        {
          id: 'session_sample_003',
          type: 'session',
          subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1',
          teacher: '‡∏Ñ‡∏£‡∏π‡∏™‡∏¥‡∏£‡∏¥‡∏£‡∏±‡∏ï‡∏ô‡πå',
          class_name: '‡∏°.6/3',
          classroom: '243',
          date: '2568-10-31',
          time: '13:00-14:30',
          day: '‡∏®‡∏∏‡∏Å‡∏£‡πå',
          week: '1',
          status: 'DONE',
          created_at: '2024-01-15T13:00:00.000Z'
        },
        {
          id: 'attendance_sample_003',
          type: 'attendance',
          student_id: '68003',
          student_name: '‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏£‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô',
          class_name: '‡∏°.6/3',
          subject: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå 1',
          teacher: '‡∏Ñ‡∏£‡∏π‡∏™‡∏¥‡∏£‡∏¥‡∏£‡∏±‡∏ï‡∏ô‡πå',
          classroom: '243',
          date: '2568-10-31',
          time: '13:00-14:30',
          status: 'A',
          created_at: '2024-01-15T14:00:00.000Z'
        }
      ];
      
      const csv = convertToCSV(sampleData);
      downloadCSV(csv, 'onet-sample-template.csv');
      showNotification('‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö CSV ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
    }

    function importData() {
      document.getElementById('import-modal').classList.add('show');
    }

    function closeImportModal() {
      document.getElementById('import-modal').classList.remove('show');
      document.getElementById('import-file').value = '';
    }

    function processImport() {
      const fileInput = document.getElementById('import-file');
      const file = fileInput.files[0];
      
      if (!file) {
        showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå', 'error');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const csv = e.target.result;
          const data = parseCSV(csv);
          
          if (data.length > 0) {
            allData.push(...data);
            saveData();
            updateUI();
            showNotification(`‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ${data.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`, 'success');
            closeImportModal();
          } else {
            showNotification('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå', 'error');
          }
        } catch (error) {
          showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå', 'error');
        }
      };
      
      reader.readAsText(file);
    }

    function convertToCSV(data) {
      if (data.length === 0) return '';
      
      const headers = Object.keys(data[0]);
      const csvContent = [
        headers.join(','),
        ...data.map(row => headers.map(header => `"${row[header] || ''}"`).join(','))
      ].join('\n');
      
      return csvContent;
    }

    function parseCSV(csv) {
      const lines = csv.split('\n');
      if (lines.length < 2) return [];
      
      const headers = lines[0].split(',').map(h => h.replace(/"/g, ''));
      const data = [];
      
      for (let i = 1; i < lines.length; i++) {
        if (lines[i].trim()) {
          const values = lines[i].split(',').map(v => v.replace(/"/g, ''));
          const record = {};
          headers.forEach((header, index) => {
            record[header] = values[index] || '';
          });
          
          // Add missing fields
          if (!record.id) {
            record.id = `imported_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
          }
          if (!record.created_at) {
            record.created_at = new Date().toISOString();
          }
          
          data.push(record);
        }
      }
      
      return data;
    }

    function downloadCSV(csv, filename) {
      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      const url = URL.createObjectURL(blob);
      link.setAttribute('href', url);
      link.setAttribute('download', filename);
      link.style.visibility = 'hidden';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    // Utility functions
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      setTimeout(() => notification.classList.add('show'), 100);
      
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    // Form handlers
    document.getElementById('login-form').addEventListener('submit', (e) => {
      e.preventDefault();
      
      const username = document.getElementById('login-username').value;
      const password = document.getElementById('login-password').value;
      
      if (login(username, password)) {
        // Login successful - handled in login function
      } else {
        document.getElementById('login-error').classList.remove('hidden');
      }
    });

    document.getElementById('session-form').addEventListener('submit', (e) => {
      e.preventDefault();
      
      const sessionData = {
        subject: document.getElementById('session-subject').value,
        teacher: document.getElementById('session-teacher').value,
        class_name: document.getElementById('session-class').value,
        classroom: document.getElementById('session-classroom').value,
        date: document.getElementById('session-date').value,
        time: document.getElementById('session-time').value,
        status: 'DONE'
      };
      
      saveSession(sessionData);
    });

    document.getElementById('attendance-form').addEventListener('submit', (e) => {
      e.preventDefault();
      
      const attendanceData = {
        student_id: document.getElementById('attendance-student-id').value,
        student_name: document.getElementById('attendance-student-name').value,
        class_name: document.getElementById('attendance-class').value,
        subject: document.getElementById('attendance-subject').value,
        teacher: document.getElementById('attendance-teacher').value,
        classroom: '',
        date: document.getElementById('attendance-date').value,
        time: document.getElementById('attendance-time').value,
        status: document.getElementById('attendance-status').value
      };
      
      saveAttendance(attendanceData);
    });

    // Navigation
    function showPage(pageId) {
      document.querySelectorAll('.page-content').forEach(page => {
        page.classList.add('hidden');
      });
      
      document.getElementById(`page-${pageId}`).classList.remove('hidden');
      
      document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.classList.remove('border-blue-600', 'text-blue-600');
        btn.classList.add('border-transparent', 'text-gray-500');
      });
      
      event.target.classList.remove('border-transparent', 'text-gray-500');
      event.target.classList.add('border-blue-600', 'text-blue-600');
    }

    // Element SDK integration
    async function onConfigChange(config) {
      const schoolName = config.school_name || defaultConfig.school_name;
      const academicYear = config.academic_year || defaultConfig.academic_year;
      const periodText = config.period_text || defaultConfig.period_text;

      document.getElementById('header-subtitle').textContent = `${schoolName} | ‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ${academicYear}`;
      document.getElementById('period-badge').textContent = periodText;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['school_name', config.school_name || defaultConfig.school_name],
        ['academic_year', config.academic_year || defaultConfig.academic_year],
        ['period_text', config.period_text || defaultConfig.period_text]
      ]);
    }

    // Initialize SDKs
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    // Initialize app
    document.addEventListener('DOMContentLoaded', initializeApp);

    // Close modals when clicking outside
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('modal')) {
        if (e.target.id === 'login-modal') closeLoginModal();
        if (e.target.id === 'session-modal') closeSessionModal();
        if (e.target.id === 'attendance-modal') closeAttendanceModal();
        if (e.target.id === 'confirm-modal') closeConfirmModal();
        if (e.target.id === 'import-modal') closeImportModal();
      }
      if (e.target.classList.contains('session-detail-modal')) {
        if (e.target.id === 'session-detail-modal') closeSessionDetailModal();
      }
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9992e9fe53087331',t:'MTc2MjI0Njc1My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
